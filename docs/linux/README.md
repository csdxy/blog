# Linux常用命令

* 命令基本格式

```text
[root@localhost ~]#
其中：
    root         当前登录用户
    localhost    主机名
    ~            当前所在目录
    #            超级用户的提示符
    $            普通用户的提示符
```

## 命令基本格式

### ls

查询目录中内容

`ls [选项] [文件或目录]`

选项 | 描述
--  |--
-a | 显示所有文件及目录 (ls内定将文件名或目录名称开头为"."的视为隐藏档，不会列出)
-l | 除文件名称外，亦将文件型态、权限、拥有者、文件大小等资讯详细列出
-r | 将文件以相反次序显示(原定依英文字母次序)
-t | 将文件依建立时间之先后次序列出
-A | 同 -a ，但不列出 "." (目前目录) 及 ".." (父目录)
-F | 在列出的文件名称后加一符号；例如可执行档则加 "*", 目录则加 "/"
-R | 若目录下有文件，则以下之文件亦皆依序列出

### mkdir

创建目录

`mkdir -p [目录名]`

选项 | 描述
--  |--
-p | 递归创建

### cd

切换所在目录

`cd [目录名]`

目录 | 描述
--  |--
~ 或 （空） | 家目录
- | 上次目录
. | 当前目录
.. | 上级目录

### pwd

显示当前目录

### rmdir

删除目录 （一般使用（rm -rf 目录/文件））

`rmdir [目录名]`

### rm

删除文件或者目录

`rm [选项] [目录名]`

选项 | 描述
--  |--
-r | 删除目录
-m | 强制删除

### cp

复制

`cp [选项] [源文件或目录] [目标文件]`

选项 | 描述
--  |--
-r | 复制目录,默认是复制文件
-p | 连带文件属性复制
-d | 若源文件是链接文件，则复制连接属性
-a | 相当于 -rpd

### mv

移动

`mv [源文件或目录] [目标文件]`

### ln

链接

`ls [选项] [源文件] [目标文件]`

选项 | 描述
--  |--
-s | 软连接（源文件必须写绝对路径）

## 文件搜索命令

### locate

* 在后台数据库中按文件名搜索，速度比较快
* 数据保存在`/var/lib/mlocate`后台数据库，每天更新一次
* 可以使用`updatedb`命令立刻更新数据库
* 只能搜索文件名
* `/etc/updatedb.conf`建立索引的配置文件
  * PRUNE_BIND_MOUNTS = "yes" 全部生效，开启搜索限制
  * PRUNEFS 不搜索的文件系统
  * PRUNENAMES 忽略的文件类型
  * PRUNEPATHS 忽略的路径 /tmp

选项 | 描述
--  |--
-e | 将排除在寻找的范围之外。
-1 | 如果 是 1．则启动安全模式。在安全模式下，使用者不会看到权限无法看到 的档案。这会始速度减慢，因为 locate 必须至实际的档案系统中取得档案的权限资料。
-f | 将特定的档案系统排除在外，例如我们没有到理要把 proc 档案系统中的档案  放在资料库中。
-q | 安静模式，不会显示任何错误讯息。
-n | 至多显示 n个输出。
-r | 使用正规运算式 做寻找的条件。
-o | 指定资料库存的名称。
-d | 指定资料库的路径
-h | 显示辅助讯息
-V | 显示程式的版本讯息

### whereis

* 搜索命令所在路径以及帮助文档所在位置

选项 | 描述
-- | --
-b | 只查找二进制文件；
-B<目录> | 只在设置的目录下查找二进制文件；
-f | 不显示文件名前的路径名称；
-m | 只查找说明文件；
-M<目录> | 只在设置的目录下查找说明文件；
-s | 只查找原始代码文件；
-S<目录> | 只在设置的目录下查找原始代码文件；
-u | 查找不包含指定类型的文件。

### which

* 查找文件、显示命令路径

选项 | 描述
-- | --
-n<文件名长度> | 制定文件名长度，指定的长度必须大于或等于所有文件中最长的文件名；
-p<文件名长度> | 与-n参数相同，但此处的<文件名长度>包含了文件的路径；
-w | 指定输出时栏位的宽度；
-V | 显示版本信息。

### $PATH

* 定义的是系统搜索命令的路径
* echo $PATH
* `/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin`

### find

在指定目录下查找文件

选项 | 描述
-- | --
-amin<分钟> | 查找在指定时间曾被存取过的文件或目录，单位以分钟计算；
-anewer<参考文件或目录> | 查找其存取时间较指定文件或目录的存取时间更接近现在的文件或目录；
-atime<24小时数> | 查找在指定时间曾被存取过的文件或目录，单位以24小时计算；
-cmin<分钟> | 查找在指定时间之时被更改过的文件或目录；
-cnewer<参考文件或目录> | 查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；
-ctime<24小时数> | 查找在指定时间之时被更改的文件或目录，单位以24小时计算；
-daystart | 从本日开始计算时间；
-depth | 从指定目录下最深层的子目录开始查找；
-expty | 寻找文件大小为0 Byte的文件，或目录下没有任何子目录或文件的空目录；
-exec<执行指令> | 假设find指令的回传值为True，就执行该指令；
-false | 将find指令的回传值皆设为False；
-fls<列表文件> | 此参数的效果和指定“-ls”参数类似，但会把结果保存为指定的列表文件；
-follow | 排除符号连接；
-fprint<列表文件> | 此参数的效果和指定“-print”参数类似，但会把结果保存成指定的列表文件；
-fprint0<列表文件> | 此参数的效果和指定“-print0”参数类似，但会把结果保存成指定的列表文件；
-fprintf<列表文件><输出格式> | 此参数的效果和指定“-printf”参数类似，但会把结果保存成指定的列表文件；
-fstype<文件系统类型> | 只寻找该文件系统类型下的文件或目录；
-gid<群组识别码> | 查找符合指定之群组识别码的文件或目录；
-group<群组名称> | 查找符合指定之群组名称的文件或目录；
-help或——help | 在线帮助；
-ilname<范本样式> | 此参数的效果和指定“-lname”参数类似，但忽略字符大小写的差别；
-iname<范本样式> | 此参数的效果和指定“-name”参数类似，但忽略字符大小写的差别；
-inum<inode编号> | 查找符合指定的inode编号的文件或目录；
-ipath<范本样式> | 此参数的效果和指定“-path”参数类似，但忽略字符大小写的差别；
-iregex<范本样式> | 此参数的效果和指定“-regexe”参数类似，但忽略字符大小写的差别；
-links<连接数目> | 查找符合指定的硬连接数目的文件或目录；
-iname<范本样式> | 指定字符串作为寻找符号连接的范本样式；
-ls | 假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出；
-maxdepth<目录层级> | 设置最大目录层级；
-mindepth<目录层级> | 设置最小目录层级；
-mmin<分钟> | 查找在指定时间曾被更改过的文件或目录，单位以分钟计算；
-mount | 此参数的效果和指定“-xdev”相同；
-mtime<24小时数> | 查找在指定时间曾被更改过的文件或目录，单位以24小时计算；
-name<范本样式> | 指定字符串作为寻找文件或目录的范本样式；
-newer<参考文件或目录> | 查找其更改时间较指定文件或目录的更改时间更接近现在的文件或目录；
-nogroup | 找出不属于本地主机群组识别码的文件或目录；
-noleaf | 不去考虑目录至少需拥有两个硬连接存在；
-nouser | 找出不属于本地主机用户识别码的文件或目录；
-ok<执行指令> | 此参数的效果和指定“-exec”类似，但在执行指令之前会先询问用户，若回答“y”或“Y”，则放弃执行命令；
-path<范本样式> | 指定字符串作为寻找目录的范本样式；
-perm<权限数值> | 查找符合指定的权限数值的文件或目录；
-print | 假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为每列一个名称，每个名称前皆有“./”字符串；
-print0 | 假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式为全部的名称皆在同一行；
-printf<输出格式> | 假设find指令的回传值为Ture，就将文件或目录名称列出到标准输出。格式可以自行指定；
-prune | 不寻找字符串作为寻找文件或目录的范本样式;
-regex<范本样式> | 指定字符串作为寻找文件或目录的范本样式；
-size<文件大小> | 查找符合指定的文件大小的文件；
-true | 将find指令的回传值皆设为True；
-type<文件类型> | 只寻找符合指定的文件类型的文件；
-uid<用户识别码> | 查找符合指定的用户识别码的文件或目录；
-used<日数> | 查找文件或目录被更改之后在指定时间曾被存取过的文件或目录，单位以日计算；
-user<拥有者名称> | 查找符和指定的拥有者名称的文件或目录；
-version或——version | 显示版本信息；
-xdev | 将范围局限在先行的文件系统中；
-xtype<文件类型> | 此参数的效果和指定“-type”参数类似，差别在于它针对符号连接检查。

#### 通配符

* `*` 匹配任意内容
* `?` 匹配任意一个字符
* `[]` 匹配任意一个中括号内的字符

### grep

* 在文件当中匹配符合条件的字符串
* find命令，在系统当中搜索符合条件的文件名，如果需要匹配，使用通配符匹配，通配符是完全匹配
* grep命令 在文件当中搜索符合条件的字符串，如果需要匹配，使用正则表达式进行匹配，正则表达式时包含匹配

选项 | 描述
-- | --
-a --text | 不要忽略二进制数据。
-A <显示行数>   --after-context=<显示行数>  | 除了显示符合范本样式的那一行之外，并显示该行之后的内容。
-b --byte-offset                          | 在显示符合范本样式的那一行之外，并显示该行之前的内容。
-B<显示行数>   --before-context=<显示行数>  | 除了显示符合样式的那一行之外，并显示该行之前的内容。
-c --count   | 计算符合范本样式的列数。
-C<显示行数> --context=<显示行数>或-<显示行数> | 除了显示符合范本样式的那一列之外，并显示该列之前后的内容。
-d<进行动作> --directories=<动作> | 当指定要查找的是目录而非文件时，必须使用这项参数，否则grep命令将回报信息并停止动作。
-e<范本样式> --regexp=<范本样式>  | 指定字符串作为查找文件内容的范本样式。
-E --extended-regexp            | 将范本样式为延伸的普通表示法来使用，意味着使用能使用扩展正则表达式。
-f<范本文件> --file=<规则文件>    | 指定范本文件，其内容有一个或多个范本样式，让grep查找符合范本条件的文件内容，格式为每一列的范本样式。
-F --fixed-regexp  | 将范本样式视为固定字符串的列表。
-G --basic-regexp  | 将范本样式视为普通的表示法来使用。
-h --no-filename   | 在显示符合范本样式的那一列之前，不标示该列所属的文件名称。
-H --with-filename | 在显示符合范本样式的那一列之前，标示该列的文件名称。
-i --ignore-case   | 忽略字符大小写的差别。
-l --file-with-matches  | 列出文件内容符合指定的范本样式的文件名称。
-L --files-without-match | 列出文件内容不符合指定的范本样式的文件名称。
-n --line-number        | 在显示符合范本样式的那一列之前，标示出该列的编号。
-P --perl-regexp        | PATTERN 是一个 Perl 正则表达式
-q --quiet或--silent    | 不显示任何信息。
-R/-r  --recursive      | 此参数的效果和指定“-d recurse”参数相同。
-s --no-messages | 不显示错误信息。
-v --revert-match | 反转查找。
-V --version     | 显示版本信息。
-w --word-regexp | 只显示全字符合的列。
-x --line-regexp | 只显示全列符合的列。
-y | 此参数效果跟“-i”相同。
-o | 只输出文件中匹配到的部分。
-m `<num>` --max-count=`<num`| 找到num行结果后停止查找，用来限制匹配行数

## 帮助命令

### man

选项 | 描述
-- | --
-a | 在所有的man帮助手册中搜索；
-f | 等价于whatis指令，显示给定关键字的简短描述信息；
-P | 指定内容时使用分页程序；
-M | 指定man手册搜索的路径。

## 压缩与解压

`.zip` `.gz` `.bz2` `.tar.gz` `.tar.bz2`

zip -qr a.zip a

## 查看登录用户信息

### w

查看登录用户信息

### who

查看登录用户信息

### last

查看当前登录和过去登录的用户信息 默认读取 /var/log/wtmp 文件

### lastlog

查看所有用户的最后一次登录时间
